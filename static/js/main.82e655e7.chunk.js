(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{143:function(e,t,a){e.exports=a(261)},148:function(e,t,a){},149:function(e,t,a){},261:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(41),r=a.n(l),i=(a(148),{apiKey:"AIzaSyD85XwtMSh4JColcfx2BXppPjwwzP2fqH8",authDomain:"bookstore-be836.firebaseapp.com",databaseURL:"https://bookstore-be836.firebaseio.com",projectId:"bookstore-be836",storageBucket:"bookstore-be836.appspot.com",messagingSenderId:"947871551028",appId:"1:947871551028:web:653b71a0e22b6e44"}),s=(a(149),a(7)),c=a(19),u=a(20),m=a(22),d=a(21),h=a(23),b=(a(229),a(268)),k=a(269),v=a(267),E=a(135),f=a(262),g=a(131),p=a(133),B=a(9),y=a(266),C=a(263),S=a(264),O=a(136),j=a(270),I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e){var t=a.state.Books;t=t.filter(function(t){return-1!==t.bookname.toLowerCase().search(e.target.value.toLowerCase())}),a.setState(function(e){return{SearchBooks:t}}),console.log(a.state.SearchBooks)},a.state={Books:[],SearchBooks:[],Searchvalue:"",modalshow:"",id:"",bookname:"",authorname:"",aemailid:"",title:"",count:"",isbn:"",assignedto:[],added:[]},a.removeBook=a.removeBook.bind(Object(B.a)(Object(B.a)(a))),a.editBook=a.editBook.bind(Object(B.a)(Object(B.a)(a))),a.editmodal=a.editmodal.bind(Object(B.a)(Object(B.a)(a))),a.flagedit=a.flagedit.bind(Object(B.a)(Object(B.a)(a))),a.falseedit=a.falseedit.bind(Object(B.a)(Object(B.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.db=s.database(),this.listenForChange()}},{key:"listenForChange",value:function(){var e=this;s.database().ref("Books").on("child_added",function(t){var a={id:t.key,bookname:t.val().bookname,authorname:t.val().authorname,aemailid:t.val().aemailid,title:t.val().title,count:t.val().count,isbn:t.val().isbn,assignedto:[t.val().assignedto]},n=e.state.Books;n.push(a),e.setState({Books:n},function(){return console.log("lenght is "+e.state.Books.length)})}),s.database().ref("Books").on("child_removed",function(t){e.setState(function(e){return{Books:e.Books.filter(function(e){return e.id!==t.key})}}),console.log(e.state.Books),console.log("Deleted "+e.state.Books.length)}),s.database().ref("Books").on("child_changed",function(t){var a=e.state.Books,n=a.findIndex(function(e){return e.id===t.key});a[n].bookname=t.val().bookname,a[n].authorname=t.val().authorname,a[n].aemailid=t.val().aemailid,a[n].title=t.val().title,a[n].count=t.val().count,a[n].id=t.key,a[n].assignedto=[t.val().assignedto],e.setState({Books:a})}),this.setState({SearchBooks:this.state.Books})}},{key:"removeBook",value:function(e){s.database().ref("Books").child(e).remove()}},{key:"editBook",value:function(e){console.log(this.state.assignedto),e.persist(),e.preventDefault(),e.stopPropagation();var t=s.auth().currentUser.email,a=null;for(var n in this.state.assignedto)this.state.assignedto[n].userid!==t||"allocated"!==this.state.assignedto[n].status&&"requested"!==this.state.assignedto[n].status||(a="present");if("present"===a||!0===this.state.added)console.log("User already have the book! Email:"+t);else{var o=s.database().ref("Books").child(this.state.id+"/assignedto").push({userid:s.auth().currentUser.email,status:"requested"});console.log(o);var l=this.state.assignedto;console.log(l),l=Object.assign(Object(p.a)({},o.key,{status:"requested",userid:s.auth().currentUser.email})),console.log(l),this.setState({assignedto:l}),console.log(this.state.assignedto)}}},{key:"falseedit",value:function(e){this.setState({modalshow:!1})}},{key:"flagedit",value:function(e,t){this.setState({modalshow:!0,id:t.id,bookname:t.bookname,authorname:t.authorname,aemailid:t.aemailid,title:t.title,count:t.count,isbn:t.isbn,assignedto:[t.assignedto]})}},{key:"editmodal",value:function(){var e=this;return!0===this.state.modalshow?o.a.createElement("div",null,o.a.createElement(y.a,{show:!0,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},o.a.createElement(y.a.Header,null,o.a.createElement(y.a.Title,{id:"contained-modal-title-vcenter"},"Accept/Reject")),o.a.createElement(y.a.Body,null,o.a.createElement(v.a,{noValidate:!0,validated:this.validated,onSubmit:function(t){return e.editBook(t)}},o.a.createElement(f.a,{type:"submit"},"Accept Book"))),o.a.createElement(y.a.Footer,null,o.a.createElement(f.a,{onClick:function(){return e.falseedit(!1)}},"Close")))):null}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(C.a,null,o.a.createElement(v.a,null,o.a.createElement(S.a,null,o.a.createElement(O.a,{sm:10},o.a.createElement(E.a,{type:"text",onChange:function(t){return e.onChange(t)},placeholder:"Search Book Name"})),o.a.createElement(O.a,{sm:2},o.a.createElement(f.a,{variant:"outline-success"},"Search")))),o.a.createElement("br",null),this.state.SearchBooks.map(function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.a.createElement(o.a.Fragment,null,t.assignedto.map(function(e){return e?t.assignedto.map(function(e){return Object.values(e).map(function(e){return e.userid===s.auth().currentUser.email?a=!0:null})}):a=!1}),!0!==a?o.a.createElement("div",null,o.a.createElement(j.a,{key:t.id},o.a.createElement(j.a.Header,{as:"h5"},t.bookname),o.a.createElement(j.a.Body,null,o.a.createElement(j.a.Title,null,t.title),o.a.createElement(j.a.Text,null,"Author : ",t.authorname,o.a.createElement("br",null),"Email id : ",t.aemailid,o.a.createElement("br",null),"ISBN : ",t.isbn,o.a.createElement("br",null)),o.a.createElement(f.a,{variant:"danger",onClick:function(){return e.removeBook(t.id)}},"Delete Book")," \xa0\xa0",o.a.createElement(f.a,{variant:"primary",onClick:function(){return e.flagedit(!0,t)}},"Add Book"),e.editmodal()),o.a.createElement(j.a.Footer,{className:"text-muted"},"count : ",t.count)),o.a.createElement("br",null)):null)})))}}]),t}(n.Component),w=a(265),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e){var t=a.state.Books;t=t.filter(function(t){return-1!==t.bookname.toLowerCase().search(e.target.value.toLowerCase())}),a.setState(function(e){return{SearchBooks:t}}),console.log(a.state.SearchBooks)},a.state={Books:[],SearchBooks:[],Searchvalue:"",modalshow:"",id:"",bookname:"",authorname:"",aemailid:"",title:"",count:"",isbn:""},a.removeBook=a.removeBook.bind(Object(B.a)(Object(B.a)(a))),a.editBook=a.editBook.bind(Object(B.a)(Object(B.a)(a))),a.editmodal=a.editmodal.bind(Object(B.a)(Object(B.a)(a))),a.flagedit=a.flagedit.bind(Object(B.a)(Object(B.a)(a))),a.falseedit=a.falseedit.bind(Object(B.a)(Object(B.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.db=s.database(),this.listenForChange()}},{key:"listenForChange",value:function(){var e=this;s.database().ref("Books").on("child_added",function(t){var a={id:t.key,bookname:t.val().bookname,authorname:t.val().authorname,aemailid:t.val().aemailid,title:t.val().title,count:t.val().count,isbn:t.val().isbn},n=e.state.Books;n.push(a),e.setState({Books:n},function(){return console.log("lenght is "+e.state.Books.length)})}),s.database().ref("Books").on("child_removed",function(t){e.setState(function(e){return{Books:e.Books.filter(function(e){return e.id!==t.key})}}),console.log(e.state.Books),console.log("Deleted "+e.state.Books.length)}),s.database().ref("Books").on("child_changed",function(t){var a=e.state.Books,n=a.findIndex(function(e){return e.id===t.key});a[n].bookname=t.val().bookname,a[n].authorname=t.val().authorname,a[n].aemailid=t.val().aemailid,a[n].title=t.val().title,a[n].count=t.val().count,a[n].id=t.key,e.setState({Books:a})}),this.setState({SearchBooks:this.state.Books})}},{key:"removeBook",value:function(e){s.database().ref("Books").child(e).remove()}},{key:"editBook",value:function(e){console.log(this.state.id),e.persist(),e.preventDefault(),e.stopPropagation(),console.log("Bookid"+this.state.id),s.database().ref("Books").child(this.state.id).set({bookname:this.state.bookname,authorname:this.state.authorname,aemailid:this.state.aemailid,title:this.state.title,count:this.state.count,isbn:this.state.isbn}).then(this.setState({modalshow:!1}))}},{key:"falseedit",value:function(e){this.setState({modalshow:!1})}},{key:"flagedit",value:function(e,t){console.log("EDITbOOK"+t.id),console.log("EDITbOOK"+t.key),this.setState({modalshow:!0,id:t.id,bookname:t.bookname,authorname:t.authorname,aemailid:t.aemailid,title:t.title,count:t.count,isbn:t.isbn})}},{key:"editmodal",value:function(){var e=this;return!0===this.state.modalshow?o.a.createElement("div",null,o.a.createElement(y.a,{show:!0,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},o.a.createElement(y.a.Header,null,o.a.createElement(y.a.Title,{id:"contained-modal-title-vcenter"},"Modal heading")),o.a.createElement(y.a.Body,null,o.a.createElement(v.a,{noValidate:!0,validated:this.validated,onSubmit:function(t){return e.editBook(t)}},o.a.createElement(v.a.Row,null,o.a.createElement(v.a.Group,{as:O.a,md:"4",controlId:"validationCustom01"},o.a.createElement(v.a.Label,null,"Book Name"),o.a.createElement(v.a.Control,{componentClass:"input",required:!0,type:"text",placeholder:"Book Name",value:this.state.bookname,onChange:function(t){return e.setState({bookname:t.target.value})}}),o.a.createElement(v.a.Control.Feedback,null,"Looks good!")),o.a.createElement(v.a.Group,{as:O.a,md:"4",controlId:"validationCustom02"},o.a.createElement(v.a.Label,null,"Author Name"),o.a.createElement(v.a.Control,{required:!0,type:"text",placeholder:"Author Name",defaultValue:"Otto",value:this.state.authorname,onChange:function(t){return e.setState({authorname:t.target.value})}}),o.a.createElement(v.a.Control.Feedback,null,"Looks good!")),o.a.createElement(v.a.Group,{as:O.a,md:"4",controlId:"validationCustomUsername"},o.a.createElement(v.a.Label,null,"Author Email Id"),o.a.createElement(w.a,null,o.a.createElement(w.a.Prepend,null,o.a.createElement(w.a.Text,{id:"inputGroupPrepend"},"@")),o.a.createElement(v.a.Control,{type:"text",placeholder:"Email id","aria-describedby":"inputGroupPrepend",required:!0,value:this.state.aemailid,onChange:function(t){return e.setState({aemailid:t.target.value})}}),o.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Please choose a username.")))),o.a.createElement(v.a.Row,null,o.a.createElement(v.a.Group,{as:O.a,md:"6",controlId:"validationCustom03"},o.a.createElement(v.a.Label,null,"Title"),o.a.createElement(v.a.Control,{type:"text",placeholder:"Title",required:!0,value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}}),o.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Please provide a valid title.")),o.a.createElement(v.a.Group,{as:O.a,md:"3",controlId:"validationCustom04"},o.a.createElement(v.a.Label,null,"Count"),o.a.createElement(v.a.Control,{type:"text",placeholder:"Count",required:!0,value:this.state.count,onChange:function(t){return e.setState({count:t.target.value})}}),o.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Please provide a valid number.")),o.a.createElement(v.a.Group,{as:O.a,md:"3",controlId:"validationCustom05"},o.a.createElement(v.a.Label,null,"ISBN"),o.a.createElement(v.a.Control,{type:"text",placeholder:"ISBN",required:!0,value:this.state.isbn,onChange:function(t){return e.setState({isbn:t.target.value})}}),o.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Please provide a valid ISBN."))),o.a.createElement(v.a.Group,null,o.a.createElement(v.a.Check,{required:!0,label:"Agree to terms and conditions",feedback:"You must agree before submitting."})),o.a.createElement(f.a,{type:"submit"},"Submit form"))),o.a.createElement(y.a.Footer,null,o.a.createElement(f.a,{onClick:function(){return e.falseedit(!1)}},"Close")))):null}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(v.a,null,o.a.createElement(S.a,null,o.a.createElement(O.a,{sm:10},o.a.createElement(E.a,{type:"text",onChange:function(t){return e.onChange(t)},placeholder:"Search Book Name"})),o.a.createElement(O.a,{sm:2},o.a.createElement(f.a,{variant:"outline-success"},"Search")))),o.a.createElement("br",null),this.state.SearchBooks.map(function(t){return o.a.createElement("div",null,o.a.createElement(j.a,{key:t.id},o.a.createElement(j.a.Header,{as:"h5"},t.bookname),o.a.createElement(j.a.Body,null,o.a.createElement(j.a.Title,null,t.title),o.a.createElement(j.a.Text,null,"Author : ",t.authorname,o.a.createElement("br",null),"Email id : ",t.aemailid,o.a.createElement("br",null),"ISBN : ",t.isbn,o.a.createElement("br",null)),o.a.createElement(f.a,{variant:"danger",onClick:function(){return e.removeBook(t.id)}},"Delete Book")," \xa0\xa0",o.a.createElement(f.a,{variant:"primary",onClick:function(){return e.flagedit(!0,t)}},"Edit Book"),e.editmodal()),o.a.createElement(j.a.Footer,{className:"text-muted"},"count : ",t.count)),o.a.createElement("br",null))}))}}]),t}(n.Component);var A=function(){return o.a.createElement("div",{class:"container"},o.a.createElement("h1",null,"Home"),o.a.createElement(x,null))},F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={Key:"",bookname:"",authorname:"",aemailid:"",title:"",count:"",isbn:"",assignedto:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"checkvalues",value:function(e){console.log(this.state.bookname),e.persist(),e.preventDefault(),e.stopPropagation();var t=s.database();console.log(t);var a=t.ref("Books"),n={bookname:this.state.bookname,authorname:this.state.authorname,aemailid:this.state.aemailid,title:this.state.title,count:this.state.count,isbn:this.state.isbn,assignedto:""};console.log(n),a.push(n).then(this.setState({bookname:"",authorname:"",aemailid:"",title:"",count:"",isbn:"",assignedto:[]}))}},{key:"render",value:function(){var e=this;return o.a.createElement(C.a,null,o.a.createElement("h1",null,"Add Book"),o.a.createElement(v.a,{noValidate:!0,validated:this.validated,onSubmit:function(t){return e.checkvalues(t)}},o.a.createElement(v.a.Row,null,o.a.createElement(v.a.Group,{as:O.a,md:"4",controlId:"validationCustom01"},o.a.createElement(v.a.Label,null,"Book Name"),o.a.createElement(v.a.Control,{componentClass:"input",required:!0,type:"text",placeholder:"Book Name",value:this.state.bookname,onChange:function(t){return e.setState({bookname:t.target.value})}}),o.a.createElement(v.a.Control.Feedback,null,"Looks good!")),o.a.createElement(v.a.Group,{as:O.a,md:"4",controlId:"validationCustom02"},o.a.createElement(v.a.Label,null,"Author Name"),o.a.createElement(v.a.Control,{required:!0,type:"text",placeholder:"Author Name",defaultValue:"Otto",value:this.state.authorname,onChange:function(t){return e.setState({authorname:t.target.value})}}),o.a.createElement(v.a.Control.Feedback,null,"Looks good!")),o.a.createElement(v.a.Group,{as:O.a,md:"4",controlId:"validationCustomUsername"},o.a.createElement(v.a.Label,null,"Author Email Id"),o.a.createElement(w.a,null,o.a.createElement(w.a.Prepend,null,o.a.createElement(w.a.Text,{id:"inputGroupPrepend"},"@")),o.a.createElement(v.a.Control,{type:"text",placeholder:"Email id","aria-describedby":"inputGroupPrepend",required:!0,value:this.state.aemailid,onChange:function(t){return e.setState({aemailid:t.target.value})}}),o.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Please choose a username.")))),o.a.createElement(v.a.Row,null,o.a.createElement(v.a.Group,{as:O.a,md:"6",controlId:"validationCustom03"},o.a.createElement(v.a.Label,null,"Title"),o.a.createElement(v.a.Control,{type:"text",placeholder:"Title",required:!0,value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}}),o.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Please provide a valid title.")),o.a.createElement(v.a.Group,{as:O.a,md:"3",controlId:"validationCustom04"},o.a.createElement(v.a.Label,null,"Count"),o.a.createElement(v.a.Control,{type:"text",placeholder:"Count",required:!0,value:this.state.count,onChange:function(t){return e.setState({count:t.target.value})}}),o.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Please provide a valid number.")),o.a.createElement(v.a.Group,{as:O.a,md:"3",controlId:"validationCustom05"},o.a.createElement(v.a.Label,null,"ISBN"),o.a.createElement(v.a.Control,{type:"text",placeholder:"ISBN",required:!0,value:this.state.isbn,onChange:function(t){return e.setState({isbn:t.target.value})}}),o.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Please provide a valid ISBN."))),o.a.createElement(v.a.Group,null,o.a.createElement(v.a.Check,{required:!0,label:"Agree to terms and conditions",feedback:"You must agree before submitting."})),o.a.createElement(f.a,{type:"submit"},"Submit form")),o.a.createElement("br",null),o.a.createElement(x,null))}}]),t}(o.a.Component),L=a(11),N=a(141),P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e){var t=a.state.Books;t=t.filter(function(t){return-1!==t.bookname.toLowerCase().search(e.target.value.toLowerCase())}),a.setState(function(e){return{SearchBooks:t}}),console.log(a.state.SearchBooks)},a.state={Books:[],SearchBooks:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.db=s.database(),this.listenForChange()}},{key:"listenForChange",value:function(){var e=this;s.database().ref("Books").on("child_added",function(t){var a;a=null!==t.val().assignedto?{id:t.key,bookname:t.val().bookname,authorname:t.val().authorname,aemailid:t.val().aemailid,title:t.val().title,count:t.val().count,isbn:t.val().isbn,assignedto:[t.val().assignedto]}:{id:t.key,bookname:t.val().bookname,authorname:t.val().authorname,aemailid:t.val().aemailid,title:t.val().title,count:t.val().count,isbn:t.val().isbn};var n=e.state.Books;n.push(a),e.setState({Books:n},function(){return console.log("lenght is "+e.state.Books.length)})}),this.setState({SearchBooks:this.state.Books})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(C.a,null,o.a.createElement("h1",null,"Assigned Books"),o.a.createElement(v.a,null,o.a.createElement(S.a,null,o.a.createElement(O.a,{sm:10},o.a.createElement(E.a,{type:"text",onChange:function(t){return e.onChange(t)},placeholder:"Search Book Name"})),o.a.createElement(O.a,{sm:2},o.a.createElement(f.a,{variant:"outline-success"},"Search")))),o.a.createElement("br",null),this.state.SearchBooks.length&&this.state.SearchBooks.map(function(e){return o.a.createElement(o.a.Fragment,null,e.assignedto.map(function(t){return t?e.assignedto.map(function(t){return Object.values(t).map(function(t){return t.userid===s.auth().currentUser.email&&"assigned"===t.status?o.a.createElement("div",null,o.a.createElement(j.a,{key:e.id},o.a.createElement(j.a.Header,{as:"h5"},e.bookname),o.a.createElement(j.a.Body,null,o.a.createElement(j.a.Title,null,e.title),o.a.createElement(j.a.Text,null,"Author : ",e.authorname,o.a.createElement("br",null),"Email id : ",e.aemailid,o.a.createElement("br",null),"ISBN : ",e.isbn,o.a.createElement("br",null))),o.a.createElement(j.a.Footer,{className:"text-muted"},"count : ",e.count)),o.a.createElement("br",null)):null})}):null}))})))}}]),t}(n.Component),q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e){var t=a.state.Books;t=t.filter(function(t){return-1!==t.bookname.toLowerCase().search(e.target.value.toLowerCase())}),a.setState(function(e){return{SearchBooks:t}}),console.log(a.state.SearchBooks)},a.state={Books:[],SearchBooks:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.db=s.database(),this.listenForChange()}},{key:"listenForChange",value:function(){var e=this;s.database().ref("Books").on("child_added",function(t){var a={id:t.key,bookname:t.val().bookname,authorname:t.val().authorname,aemailid:t.val().aemailid,title:t.val().title,count:t.val().count,isbn:t.val().isbn,assignedto:[t.val().assignedto]},n=e.state.Books;n.push(a),e.setState({Books:n},function(){return console.log("lenght is "+e.state.Books.length)})}),this.setState({SearchBooks:this.state.Books})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(C.a,null,o.a.createElement("h1",null,"Requested Books"),o.a.createElement(v.a,null,o.a.createElement(S.a,null,o.a.createElement(O.a,{sm:10},o.a.createElement(E.a,{type:"text",onChange:function(t){return e.onChange(t)},placeholder:"Search Book Name"})),o.a.createElement(O.a,{sm:2},o.a.createElement(f.a,{variant:"outline-success"},"Search")))),o.a.createElement("br",null),this.state.SearchBooks.length&&this.state.SearchBooks.map(function(e){return o.a.createElement(o.a.Fragment,null,e.assignedto.map(function(t){return t?e.assignedto.map(function(t){return Object.values(t).map(function(t){return t.userid===s.auth().currentUser.email&&"requested"===t.status?o.a.createElement("div",null,o.a.createElement(j.a,{key:e.id},o.a.createElement(j.a.Header,{as:"h5"},e.bookname),o.a.createElement(j.a.Body,null,o.a.createElement(j.a.Title,null,e.title),o.a.createElement(j.a.Text,null,"Author : ",e.authorname,o.a.createElement("br",null),"Email id : ",e.aemailid,o.a.createElement("br",null),"ISBN : ",e.isbn,o.a.createElement("br",null))),o.a.createElement(j.a.Footer,{className:"text-muted"},"count : ",e.count)),o.a.createElement("br",null)):null})}):null}))})))}}]),t}(n.Component),D=a(137),T=a(99);function R(){var e=Object(D.a)(["",""]);return R=function(){return e},e}var G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e){var t=a.state.Books;t=t.filter(function(t){return-1!==t.bookname.toLowerCase().search(e.target.value.toLowerCase())}),a.setState(function(e){return{SearchBooks:t}}),console.log(a.state.SearchBooks)},a.state={Books:[],SearchBooks:[],Searchvalue:"",modalshow:"",id:"",bookname:"",authorname:"",aemailid:"",title:"",count:"",isbn:"",assignedto:[],added:[],key:""},a.removeBook=a.removeBook.bind(Object(B.a)(Object(B.a)(a))),a.editBook=a.editBook.bind(Object(B.a)(Object(B.a)(a))),a.editmodal=a.editmodal.bind(Object(B.a)(Object(B.a)(a))),a.flagedit=a.flagedit.bind(Object(B.a)(Object(B.a)(a))),a.falseedit=a.falseedit.bind(Object(B.a)(Object(B.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.db=s.database(),this.listenForChange()}},{key:"listenForChange",value:function(){var e=this;s.database().ref("Books").on("child_added",function(t){var a={id:t.key,bookname:t.val().bookname,authorname:t.val().authorname,aemailid:t.val().aemailid,title:t.val().title,count:t.val().count,isbn:t.val().isbn,assignedto:[t.val().assignedto]},n=e.state.Books;n.push(a),e.setState({Books:n},function(){return console.log("lenght is "+e.state.Books.length)})}),s.database().ref("Books").on("child_removed",function(t){e.setState(function(e){return{Books:e.Books.filter(function(e){return e.id!==t.key})}}),console.log(e.state.Books),console.log("Deleted "+e.state.Books.length)}),s.database().ref("Books").on("child_changed",function(t){var a=e.state.Books,n=a.findIndex(function(e){return e.id===t.key});a[n].bookname=t.val().bookname,a[n].authorname=t.val().authorname,a[n].aemailid=t.val().aemailid,a[n].title=t.val().title,a[n].count=t.val().count,a[n].id=t.key,a[n].assignedto=[t.val().assignedto],e.setState({Books:a})}),this.setState({SearchBooks:this.state.Books})}},{key:"removeBook",value:function(e){s.database().ref("Books").child(e).remove()}},{key:"editBook",value:function(e){console.log(this.state.assignedto),e.persist(),e.preventDefault(),e.stopPropagation();var t=s.auth().currentUser.email,a=null;for(var n in this.state.assignedto)this.state.assignedto[n].userid!==t||"allocated"!==this.state.assignedto[n].status&&"requested"!==this.state.assignedto[n].status||(a="present");"present"===a||!0===this.state.added?console.log("User already have the book! Email:"+t):(s.database().ref("Books").child(this.state.id+"/assignedto").child(this.state.key+"/status").set("assigned"),console.log(this.state.assignedto))}},{key:"falseedit",value:function(e){this.setState({modalshow:!1})}},{key:"flagedit",value:function(e,t,a){console.log(a),this.setState({modalshow:!0,id:t.id,bookname:t.bookname,authorname:t.authorname,aemailid:t.aemailid,title:t.title,count:t.count,isbn:t.isbn,assignedto:[t.assignedto],key:Object.values(a)})}},{key:"editmodal",value:function(){var e=this;return!0===this.state.modalshow?o.a.createElement("div",null,o.a.createElement(y.a,{show:!0,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},o.a.createElement(y.a.Header,null,o.a.createElement(y.a.Title,{id:"contained-modal-title-vcenter"},"Accept/Reject")),o.a.createElement(y.a.Body,null,o.a.createElement(v.a,{noValidate:!0,validated:this.validated,onSubmit:function(t){return e.editBook(t)}},o.a.createElement(f.a,{type:"submit"},"Accept Book"))),o.a.createElement(y.a.Footer,null,o.a.createElement(f.a,{onClick:function(){return e.falseedit(!1)}},"Close")))):null}},{key:"getkey",value:function(e){Object.entries(e).forEach(function(e){var t=Object(T.a)(e,2),a=t[0],n=t[1];return"requested"==="".concat(n.status)&&(console.log("".concat(n.status)(R(),a)),!0)})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(C.a,null,o.a.createElement("h1",null,"Approve Books"),o.a.createElement(v.a,null,o.a.createElement(S.a,null,o.a.createElement(O.a,{sm:10},o.a.createElement(E.a,{type:"text",onChange:function(t){return e.onChange(t)},placeholder:"Search Book Name"})),o.a.createElement(O.a,{sm:2},o.a.createElement(f.a,{variant:"outline-success"},"Search")))),o.a.createElement("br",null),this.state.SearchBooks.map(function(t,a){return o.a.createElement(o.a.Fragment,null,t.assignedto.map(function(a){return a?t.assignedto.map(function(a){return Object.entries(a).map(function(a){var n=Object(T.a)(a,2),l=n[0],r=n[1];return"requested"==="".concat(r.status)?o.a.createElement("div",null,o.a.createElement(j.a,{key:t.id},o.a.createElement(j.a.Header,{as:"h5"},t.bookname),o.a.createElement(j.a.Body,null,o.a.createElement(j.a.Title,null,t.title),o.a.createElement(j.a.Text,null,"Author : ",t.authorname,o.a.createElement("br",null),"Email id : ",t.aemailid,o.a.createElement("br",null),"ISBN : ",t.isbn,o.a.createElement("br",null),"Requested By : ",r.userid),o.a.createElement(f.a,{variant:"danger",onClick:function(){return e.removeBook(t.id)}},"Delete Book")," \xa0\xa0",o.a.createElement(f.a,{variant:"primary",onClick:function(){return e.flagedit(!0,t,{key:l})}},"Add Book"),e.editmodal()),o.a.createElement(j.a.Footer,{className:"text-muted"},"count : ",t.count)),o.a.createElement("br",null)):null})}):null}))})))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).uiConfig={signInflow:"popup",signInOptions:[s.auth.GoogleAuthProvider.PROVIDER_ID,s.auth.FacebookAuthProvider.PROVIDER_ID,s.auth.TwitterAuthProvider.PROVIDER_ID,s.auth.GithubAuthProvider.PROVIDER_ID,s.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},a.state={isloggedin:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;s.auth().onAuthStateChanged(function(t){e.setState({isloggedin:!!t})})}},{key:"IsTrue",value:function(){return console.log(this),this.setState({isloggedin:!0})}},{key:"checkadminlink",value:function(){return"admin@admin.com"===s.auth().currentUser.email?o.a.createElement(b.a,null,o.a.createElement(b.a.Link,{href:"/"},"Add Books"),o.a.createElement(b.a.Link,{href:"/approve"},"Approve")):o.a.createElement(b.a,null,o.a.createElement(b.a.Link,{href:"/request"},"Request "),o.a.createElement(b.a.Link,{href:"/"},"Approved Books "),o.a.createElement(b.a.Link,{href:"/requested"},"Requested Books "))}},{key:"checkadminpath",value:function(){return"admin@admin.com"===s.auth().currentUser.email?o.a.createElement("div",null,o.a.createElement(L.a,{path:"/",exact:!0,component:F}),o.a.createElement(L.a,{path:"/approve",component:G})):o.a.createElement("div",null,o.a.createElement(L.a,{path:"/request",component:I}),o.a.createElement(L.a,{path:"/home",component:A}),o.a.createElement(L.a,{path:"/",exact:!0,component:P}),o.a.createElement(L.a,{path:"/requested",component:q}))}},{key:"render",value:function(){return this.state.isloggedin?o.a.createElement("div",null,o.a.createElement(N.a,null,o.a.createElement(k.a,{bg:"light",expand:"lg"},o.a.createElement(k.a.Brand,{href:"/home"},"Book Store"),o.a.createElement(k.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(k.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(b.a,{className:"mr-auto"},o.a.createElement(b.a.Link,null,"Welcome ",s.auth().currentUser.displayName),this.checkadminlink(),o.a.createElement(b.a.Link,{onClick:function(){return s.auth().signOut()}},"Sign Out")),o.a.createElement(v.a,{inline:!0},o.a.createElement(E.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),o.a.createElement(f.a,{variant:"outline-success"},"Search")))),o.a.createElement("br",null),o.a.createElement("div",null,o.a.createElement(L.c,null,this.checkadminpath())))):o.a.createElement("div",null,o.a.createElement(k.a,{bg:"light",expand:"lg"},o.a.createElement(k.a.Brand,{href:"#home"},"Book Store"),o.a.createElement(k.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(k.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(b.a,{className:"mr-auto"})))," ",o.a.createElement("br",null),o.a.createElement("center",null,o.a.createElement("b",null,o.a.createElement("h1",null," Please Sign In to continue"))),o.a.createElement("br",null),o.a.createElement(g.StyledFirebaseAuth,{uiConfig:this.uiConfig,firebaseAuth:s.auth()}))}}]),t}(n.Component);var U=function(){return s.apps.length||s.initializeApp(i),o.a.createElement("div",null,o.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[143,1,2]]]);
//# sourceMappingURL=main.82e655e7.chunk.js.map